

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>tatk.dialog_agent package &mdash; tatk  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="tatk.dst.rule.multiwoz package" href="tatk.dst.rule.multiwoz.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> tatk
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Package Reference:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="tatk.util.html">tatk.util package</a></li>
<li class="toctree-l1"><a class="reference internal" href="tatk.task.html">tatk.task package</a></li>
<li class="toctree-l1"><a class="reference internal" href="tatk.policy.html">tatk.policy package</a></li>
<li class="toctree-l1"><a class="reference internal" href="tatk.nlu.html">tatk.nlu package</a></li>
<li class="toctree-l1"><a class="reference internal" href="tatk.nlg.html">tatk.nlg package</a></li>
<li class="toctree-l1"><a class="reference internal" href="tatk.evaluator.html">tatk.evaluator package</a></li>
<li class="toctree-l1"><a class="reference internal" href="tatk.e2e.html">tatk.e2e package</a></li>
<li class="toctree-l1"><a class="reference internal" href="tatk.dst.html">tatk.dst package</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">tatk.dialog_agent package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-tatk.dialog_agent.agent">tatk.dialog_agent.agent module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-tatk.dialog_agent.session">tatk.dialog_agent.session module</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">tatk</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>tatk.dialog_agent package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/tatk.dialog_agent.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tatk-dialog-agent-package">
<h1>tatk.dialog_agent package<a class="headerlink" href="#tatk-dialog-agent-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-tatk.dialog_agent.agent">
<span id="tatk-dialog-agent-agent-module"></span><h2>tatk.dialog_agent.agent module<a class="headerlink" href="#module-tatk.dialog_agent.agent" title="Permalink to this headline">¶</a></h2>
<p>Dialog agent interface and classes.</p>
<dl class="class">
<dt id="tatk.dialog_agent.agent.Agent">
<em class="property">class </em><code class="sig-prename descclassname">tatk.dialog_agent.agent.</code><code class="sig-name descname">Agent</code><a class="headerlink" href="#tatk.dialog_agent.agent.Agent" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Interface for dialog agent classes.</p>
<dl class="method">
<dt id="tatk.dialog_agent.agent.Agent.init_session">
<em class="property">abstract </em><code class="sig-name descname">init_session</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tatk.dialog_agent.agent.Agent.init_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the class variables to prepare for a new session.</p>
</dd></dl>

<dl class="method">
<dt id="tatk.dialog_agent.agent.Agent.response">
<em class="property">abstract </em><code class="sig-name descname">response</code><span class="sig-paren">(</span><em class="sig-param">observation</em><span class="sig-paren">)</span><a class="headerlink" href="#tatk.dialog_agent.agent.Agent.response" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate agent response given user input.
The data type of input and response can be either str or dict, condition on the form of agent.
Example:</p>
<blockquote>
<div><p>If the agent is a pipeline agent with NLU, DST and Policy, then type(input) == str and
type(response) == dict.</p>
</div></blockquote>
<dl class="simple">
<dt>Args:</dt><dd><p>observation (str or dict): The input to the agent.</p>
</dd>
<dt>Returns:</dt><dd><p>response (str or dict): The response generated by the agent.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="tatk.dialog_agent.agent.PipelineAgent">
<em class="property">class </em><code class="sig-prename descclassname">tatk.dialog_agent.agent.</code><code class="sig-name descname">PipelineAgent</code><span class="sig-paren">(</span><em class="sig-param">nlu_model</em>, <em class="sig-param">tracker</em>, <em class="sig-param">policy</em>, <em class="sig-param">nlg_model</em><span class="sig-paren">)</span><a class="headerlink" href="#tatk.dialog_agent.agent.PipelineAgent" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tatk.dialog_agent.agent.Agent" title="tatk.dialog_agent.agent.Agent"><code class="xref py py-class docutils literal notranslate"><span class="pre">tatk.dialog_agent.agent.Agent</span></code></a></p>
<p>Pipeline dialog agent base class, including NLU, DST, Policy and NLG.</p>
<p>The combination modes of pipeline agent modules are flexible. The only thing you have to make sure is that
the API of agents are matched.
Example:</p>
<blockquote>
<div><p>If agent A is (nlu, tracker, policy), then the agent B should be like (tracker, policy, nlg) to ensure API
matching.</p>
</div></blockquote>
<dl>
<dt>The valid module combinations are as follows:</dt><dd><table class="docutils align-default">
<colgroup>
<col style="width: 21%" />
<col style="width: 21%" />
<col style="width: 25%" />
<col style="width: 13%" />
<col style="width: 8%" />
<col style="width: 13%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>NLU</p></th>
<th class="head"><p>DST</p></th>
<th class="head"><p>Policy</p></th>
<th class="head"><p>NLG</p></th>
<th class="head"><p>In</p></th>
<th class="head"><p>Out</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>+</p></td>
<td><p>+</p></td>
<td><p>+</p></td>
<td><p>+</p></td>
<td><p>nl</p></td>
<td><p>nl</p></td>
</tr>
<tr class="row-odd"><td><p>o</p></td>
<td><p>+</p></td>
<td><p>+</p></td>
<td><p>+</p></td>
<td><p>da</p></td>
<td><p>nl</p></td>
</tr>
<tr class="row-even"><td><p>o</p></td>
<td><p>+</p></td>
<td><p>+</p></td>
<td><p>o</p></td>
<td><p>da</p></td>
<td><p>da</p></td>
</tr>
<tr class="row-odd"><td><p>+</p></td>
<td><p>+</p></td>
<td><p>+</p></td>
<td><p>o</p></td>
<td><p>nl</p></td>
<td><p>da</p></td>
</tr>
<tr class="row-even"><td><p>o</p></td>
<td><p>o</p></td>
<td><p>+</p></td>
<td><p>o</p></td>
<td><p>da</p></td>
<td><p>da</p></td>
</tr>
</tbody>
</table>
</dd>
</dl>
<dl class="method">
<dt id="tatk.dialog_agent.agent.PipelineAgent.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">nlu_model</em>, <em class="sig-param">tracker</em>, <em class="sig-param">policy</em>, <em class="sig-param">nlg_model</em><span class="sig-paren">)</span><a class="headerlink" href="#tatk.dialog_agent.agent.PipelineAgent.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>The constructor of PipelineAgent class.
Here are some special combination cases:
1. If you use word-level DST (such as Neural Belief Tracker), you should set the nlu_model paramater to None. The</p>
<blockquote>
<div><p>agent will combine the modules automitically.</p>
</div></blockquote>
<p>2. If you want to aggregate DST and Policy as a single module, set tracker to None.
Args:</p>
<blockquote>
<div><p>nlu_model (NLU): The natural langauge understanding module of agent.
tracker (Tracker): The dialog state tracker of agent.
policy (Policy): The dialog policy module of agent.
nlg_model (NLG): The natural langauge generator module of agent.</p>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="tatk.dialog_agent.agent.PipelineAgent.get_reward">
<code class="sig-name descname">get_reward</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tatk.dialog_agent.agent.PipelineAgent.get_reward" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="tatk.dialog_agent.agent.PipelineAgent.init_session">
<code class="sig-name descname">init_session</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tatk.dialog_agent.agent.PipelineAgent.init_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Init the attributes of DST and Policy module.</p>
</dd></dl>

<dl class="method">
<dt id="tatk.dialog_agent.agent.PipelineAgent.is_terminal">
<code class="sig-name descname">is_terminal</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tatk.dialog_agent.agent.PipelineAgent.is_terminal" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="tatk.dialog_agent.agent.PipelineAgent.response">
<code class="sig-name descname">response</code><span class="sig-paren">(</span><em class="sig-param">observation</em><span class="sig-paren">)</span><a class="headerlink" href="#tatk.dialog_agent.agent.PipelineAgent.response" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate agent response using the agent modules.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-tatk.dialog_agent.session">
<span id="tatk-dialog-agent-session-module"></span><h2>tatk.dialog_agent.session module<a class="headerlink" href="#module-tatk.dialog_agent.session" title="Permalink to this headline">¶</a></h2>
<p>Dialog controller classes.</p>
<dl class="class">
<dt id="tatk.dialog_agent.session.BiSession">
<em class="property">class </em><code class="sig-prename descclassname">tatk.dialog_agent.session.</code><code class="sig-name descname">BiSession</code><span class="sig-paren">(</span><em class="sig-param">sys_agent</em>, <em class="sig-param">user_agent</em>, <em class="sig-param">kb_query</em><span class="sig-paren">)</span><a class="headerlink" href="#tatk.dialog_agent.session.BiSession" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tatk.dialog_agent.session.Session" title="tatk.dialog_agent.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">tatk.dialog_agent.session.Session</span></code></a></p>
<p>The dialog controller which aggregates several agents to conduct a complete dialog session.</p>
<dl class="simple">
<dt>Attributes:</dt><dd><p>sys_agent (Agent): system dialog agent.
user_agent (Agent): user dialog agent.
kb_query (KBquery): knowledge base query tool.
dialog_history (list): The dialog history, formatted as [[user_uttr1, sys_uttr1], [user_uttr2, sys_uttr2], …]</p>
</dd>
</dl>
<dl class="method">
<dt id="tatk.dialog_agent.session.BiSession.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">sys_agent</em>, <em class="sig-param">user_agent</em>, <em class="sig-param">kb_query</em><span class="sig-paren">)</span><a class="headerlink" href="#tatk.dialog_agent.session.BiSession.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Args:</dt><dd><p>sys_agent (Agent): An instance of system agent.
user_agent (Agent): An instance of user agent.
kb_query (KBquery): An instance of database query tool.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="tatk.dialog_agent.session.BiSession.init_session">
<code class="sig-name descname">init_session</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tatk.dialog_agent.session.BiSession.init_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Init the agent variables for a new session.</p>
</dd></dl>

<dl class="method">
<dt id="tatk.dialog_agent.session.BiSession.next_agent">
<code class="sig-name descname">next_agent</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tatk.dialog_agent.session.BiSession.next_agent" title="Permalink to this definition">¶</a></dt>
<dd><p>The user and system agent response in turn.</p>
</dd></dl>

<dl class="method">
<dt id="tatk.dialog_agent.session.BiSession.next_response">
<code class="sig-name descname">next_response</code><span class="sig-paren">(</span><em class="sig-param">observation</em><span class="sig-paren">)</span><a class="headerlink" href="#tatk.dialog_agent.session.BiSession.next_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Generated the next response.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>observation (str or dict): The agent observation of next agent.</p>
</dd>
<dt>Returns:</dt><dd><p>response (str or dict): The agent’s response.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="tatk.dialog_agent.session.BiSession.next_turn">
<code class="sig-name descname">next_turn</code><span class="sig-paren">(</span><em class="sig-param">last_observation</em><span class="sig-paren">)</span><a class="headerlink" href="#tatk.dialog_agent.session.BiSession.next_turn" title="Permalink to this definition">¶</a></dt>
<dd><p>Conduct a new turn of dialog, which consists of the system response and user response.
The variable type of responses can be either 1) str or 2) dialog act, depends on the dialog mode settings of the
two agents which are supposed to be the same.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>last_observation: Last agent response.</p>
</dd>
<dt>Returns:</dt><dd><p>sys_response: The response of system.
user_response:The response of user simulator.
session_over (boolean): True if session ends, else session continues.
reward (float): The reward given by the user.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="tatk.dialog_agent.session.BiSession.train_policy">
<code class="sig-name descname">train_policy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tatk.dialog_agent.session.BiSession.train_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Train the parameters of system agent policy.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="tatk.dialog_agent.session.Session">
<em class="property">class </em><code class="sig-prename descclassname">tatk.dialog_agent.session.</code><code class="sig-name descname">Session</code><a class="headerlink" href="#tatk.dialog_agent.session.Session" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Base dialog session controller, which manages the agents to conduct a complete dialog session.</p>
<dl class="method">
<dt id="tatk.dialog_agent.session.Session.init_session">
<em class="property">abstract </em><code class="sig-name descname">init_session</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tatk.dialog_agent.session.Session.init_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Init the agent variables for a new session.</p>
</dd></dl>

<dl class="method">
<dt id="tatk.dialog_agent.session.Session.next_agent">
<em class="property">abstract </em><code class="sig-name descname">next_agent</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tatk.dialog_agent.session.Session.next_agent" title="Permalink to this definition">¶</a></dt>
<dd><p>Decide the next agent to generate a response.</p>
<p>In this base class, this function returns the index randomly.</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>next_agent (Agent): The index of the next agent.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="tatk.dialog_agent.session.Session.next_response">
<em class="property">abstract </em><code class="sig-name descname">next_response</code><span class="sig-paren">(</span><em class="sig-param">observation</em><span class="sig-paren">)</span><a class="headerlink" href="#tatk.dialog_agent.session.Session.next_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Generated the next response.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>observation (str or dict): The agent observation of next agent.</p>
</dd>
<dt>Returns:</dt><dd><p>response (str or dict): The agent’s response.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="tatk.dst.rule.multiwoz.html" class="btn btn-neutral" title="tatk.dst.rule.multiwoz package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, thu-coai

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>